<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Java集合概述 | harrison&#39;s blog</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="后端技术博客,简洁至上,专注Java学习与总结。Java, Spring, SpringBoot, SpringCloud, MyBatis, Netty, RabbitMQ, Kafka, Dubbo, Linux, Linux Kernel等技术文章。">
    <meta name="keywords" content="后端技术博客">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="preload" href="/assets/css/0.styles.db69af13.css" as="style"><link rel="preload" href="/assets/js/app.36e91a11.js" as="script"><link rel="preload" href="/assets/js/2.409e0185.js" as="script"><link rel="preload" href="/assets/js/16.3d55b70f.js" as="script"><link rel="prefetch" href="/assets/js/10.1206fbe6.js"><link rel="prefetch" href="/assets/js/11.811b7408.js"><link rel="prefetch" href="/assets/js/12.83e62cf0.js"><link rel="prefetch" href="/assets/js/13.3da6fa14.js"><link rel="prefetch" href="/assets/js/14.be23cced.js"><link rel="prefetch" href="/assets/js/15.5b1701fd.js"><link rel="prefetch" href="/assets/js/17.7429b142.js"><link rel="prefetch" href="/assets/js/18.796642e8.js"><link rel="prefetch" href="/assets/js/19.ffb2f3b3.js"><link rel="prefetch" href="/assets/js/20.9b77edb3.js"><link rel="prefetch" href="/assets/js/21.45f0bd1c.js"><link rel="prefetch" href="/assets/js/22.05843092.js"><link rel="prefetch" href="/assets/js/23.99984d12.js"><link rel="prefetch" href="/assets/js/24.6a89fd33.js"><link rel="prefetch" href="/assets/js/25.16160e78.js"><link rel="prefetch" href="/assets/js/26.471a561c.js"><link rel="prefetch" href="/assets/js/27.ff9b36a8.js"><link rel="prefetch" href="/assets/js/28.d235529f.js"><link rel="prefetch" href="/assets/js/29.ac8ca018.js"><link rel="prefetch" href="/assets/js/3.1c6d2763.js"><link rel="prefetch" href="/assets/js/30.96538408.js"><link rel="prefetch" href="/assets/js/31.47118b60.js"><link rel="prefetch" href="/assets/js/32.fb74aca4.js"><link rel="prefetch" href="/assets/js/33.d059016b.js"><link rel="prefetch" href="/assets/js/34.c1f0aff0.js"><link rel="prefetch" href="/assets/js/35.1b63946e.js"><link rel="prefetch" href="/assets/js/36.305c9ab9.js"><link rel="prefetch" href="/assets/js/37.1f8690b8.js"><link rel="prefetch" href="/assets/js/38.6a0faec0.js"><link rel="prefetch" href="/assets/js/39.6a4f34cc.js"><link rel="prefetch" href="/assets/js/4.f0a8c30f.js"><link rel="prefetch" href="/assets/js/40.2d767369.js"><link rel="prefetch" href="/assets/js/41.f6602ec0.js"><link rel="prefetch" href="/assets/js/42.d86dc81f.js"><link rel="prefetch" href="/assets/js/43.3193e48c.js"><link rel="prefetch" href="/assets/js/44.ba2bfbed.js"><link rel="prefetch" href="/assets/js/45.c855ea02.js"><link rel="prefetch" href="/assets/js/46.cc0695f3.js"><link rel="prefetch" href="/assets/js/47.9356ab33.js"><link rel="prefetch" href="/assets/js/48.04ed80cc.js"><link rel="prefetch" href="/assets/js/49.3b625cf2.js"><link rel="prefetch" href="/assets/js/5.e688792f.js"><link rel="prefetch" href="/assets/js/50.45f22e5f.js"><link rel="prefetch" href="/assets/js/51.e28308a2.js"><link rel="prefetch" href="/assets/js/52.2d74a9f7.js"><link rel="prefetch" href="/assets/js/53.9ea65ca6.js"><link rel="prefetch" href="/assets/js/54.b92ef08c.js"><link rel="prefetch" href="/assets/js/55.c96f6cd9.js"><link rel="prefetch" href="/assets/js/56.66e76778.js"><link rel="prefetch" href="/assets/js/57.290715f8.js"><link rel="prefetch" href="/assets/js/58.68f33ada.js"><link rel="prefetch" href="/assets/js/59.a0c46087.js"><link rel="prefetch" href="/assets/js/6.feb75664.js"><link rel="prefetch" href="/assets/js/60.942b9285.js"><link rel="prefetch" href="/assets/js/7.3e34b1bc.js"><link rel="prefetch" href="/assets/js/8.e4dd00a2.js"><link rel="prefetch" href="/assets/js/9.74704eea.js">
    <link rel="stylesheet" href="/assets/css/0.styles.db69af13.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/HL-logo.png" alt="harrison's blog" class="logo"> <span class="site-name can-hide">harrison's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/categories/" class="nav-link">分类</a></div><div class="nav-item"><a href="/tags/" class="nav-link">标签</a></div><div class="nav-item"><a href="/archives/" class="nav-link">归档</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="收藏" class="dropdown-title"><!----> <span class="title" style="display:;">收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/collections/websites/" class="nav-link">网站</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://cdn.jsdelivr.net/gh/HarrisonLee1998/image/avatar.jpg"> <div class="blogger-info"><h3>Harrison Lee</h3> <span>玻璃晴朗，橘子辉煌</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/categories/" class="nav-link">分类</a></div><div class="nav-item"><a href="/tags/" class="nav-link">标签</a></div><div class="nav-item"><a href="/archives/" class="nav-link">归档</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="收藏" class="dropdown-title"><!----> <span class="title" style="display:;">收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/collections/websites/" class="nav-link">网站</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Java</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>集合</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/3bb6cb/" aria-current="page" class="active sidebar-link">Java集合概述</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/3bb6cb/#集合体系概览" class="sidebar-link">集合体系概览</a></li><li class="sidebar-sub-header"><a href="/pages/3bb6cb/#基础数据结构" class="sidebar-link">基础数据结构</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/3bb6cb/#数组" class="sidebar-link">数组</a></li><li class="sidebar-sub-header"><a href="/pages/3bb6cb/#链表" class="sidebar-link">链表</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/3bb6cb/#java中的集合实现" class="sidebar-link">Java中的集合实现</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/3bb6cb/#列表" class="sidebar-link">列表</a></li><li class="sidebar-sub-header"><a href="/pages/3bb6cb/#队列和栈" class="sidebar-link">队列和栈</a></li><li class="sidebar-sub-header"><a href="/pages/3bb6cb/#映射" class="sidebar-link">映射</a></li><li class="sidebar-sub-header"><a href="/pages/3bb6cb/#线程安全" class="sidebar-link">线程安全</a></li></ul></li></ul></li><li><a href="/pages/574b5f/" class="sidebar-link">Java集合中的ConcurrentModificationException</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>线程与并发</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>JVM</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>JDBC</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper bg-style-1"><div class="articleInfo-wrap" data-v-33863c7e><div class="articleInfo" data-v-33863c7e><ul class="breadcrumbs" data-v-33863c7e><li data-v-33863c7e><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-33863c7e></a></li> <li data-v-33863c7e><a href="/categories/?category=%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80" title="分类" data-v-33863c7e>编程语言</a></li> <li data-v-33863c7e><a href="/categories/?category=Java" title="分类" data-v-33863c7e>Java</a></li> <li data-v-33863c7e><a href="/categories/?category=%E9%9B%86%E5%90%88" title="分类" data-v-33863c7e>集合</a></li></ul> <div class="info" data-v-33863c7e><div title="作者" class="author iconfont icon-touxiang" data-v-33863c7e><a href="https://github.com/HarrisonLee1998" target="_blank" title="作者" class="beLink" data-v-33863c7e>Harrison Lee</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-33863c7e><a href="javascript:;" data-v-33863c7e>2021-01-18</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">
          Java集合概述
        </h1> <!----> <div class="theme-vdoing-content content__default"><p>集合可以说是无处不在，我们日常的业务代码以及各种框架底层实现都大量使用集合。集合是存储和管理数据的工具，不同集合采用不同的数据结构，这些数据结构本身并无优劣之分，但是在特定场景下其效率将会产生天壤之别。所以，熟练掌握各种集合以及底层的实现原理对系统开发至关重要。</p> <h2 id="集合体系概览"><a href="#集合体系概览" class="header-anchor">#</a> 集合体系概览</h2> <p>Java集合类库将接口与实现分离，接口定义了基本操作，实现决定采用哪种数据结构来存储数据以及如何实现这些操作。Java集合体系中的接口如下图所示：</p> <p><img src="https://cdn.harrisonlee.net/image-20210118125902726.png" alt="Java集合框架中的接口"></p> <p>整个体系可以分为四部分：</p> <ul><li><p><code>RandomAccess</code>：这个接口不包含任何方法，属于一个标记接口。可以用它来测试一个特定的集合是否支持高效的<strong>随机访问</strong>。</p></li> <li><p><code>Iterator</code>：迭代器，可以用来对iterable对象进行迭代和删除操作。</p></li> <li><p><code>Collection</code>：单列集合，存储某一类型的数据。一共有三个子接口分别是<code>List</code>，<code>Set</code>，<code>Queue</code>，分别表示列表，集合（不同于本文所属的广义上的集合，而是数学概念中的集合），队列。另外，以前Java提供了关于栈的实现，但是由于其效率不太高，已不推荐使用，可以使用双端队列来模拟。</p></li> <li><p><code>Map</code>：双列集合，存储键和值的映射关系。关于为什么<code>Map</code>不继承于<code>Collection</code>，Java官方给出的回答时<code>Collection</code>的这种单列关系无法表示<code>Map</code>中的双列关系，就算把map中的键值对封装为entry存入collection中，那么无法直接根据键获取到值，也无法直接根据键删除一对键值。</p></li></ul> <h2 id="基础数据结构"><a href="#基础数据结构" class="header-anchor">#</a> 基础数据结构</h2> <p>其实根据存储特点，本质上就两种数据结构--数组和链表，其他比如队列，栈，树，图等都是基于数组和链表来实现的，<strong>数组和链表属于物理数据结构，而队列和栈等更像是逻辑数据结构</strong>。不管是<code>Collection</code>的各个子接口还是<code>Map</code>，都提供了基于不同数据结构的实现，这些不同的实现具有不同的使用场景。所以，在项目中要根据业务逻辑合理选择使用哪种容器，不要一股脑地使用<code>ArrayList</code>存储元素，<code>HashMap</code>存储映射关系。</p> <h3 id="数组"><a href="#数组" class="header-anchor">#</a> 数组</h3> <p>数组是两大基础数据结构之一。数组表示一组<strong>连续</strong>存储的数据，正是因为连续的特性，所以数组随机访问的效率很高，只需<span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span>的时间复杂度；不过也正是因为连续，所以导致插入和删除操作效率不如链表，因为插入和删除会导致数组元素的移动，时间复杂度为<span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span></span>。</p> <h3 id="链表"><a href="#链表" class="header-anchor">#</a> 链表</h3> <p>链表是两大基础数据结构之一。链表和数组是互补的，因为数组的优点刚好是链表的缺点，数组的缺点刚好是链表的优点。所以，链表不能随机访问，如果要访问某个元素，需要遍历整个链表，时间复杂度为<span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span></span>；但是链表适合插入和删除，时间复杂度仅为<span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span>。</p> <h2 id="java中的集合实现"><a href="#java中的集合实现" class="header-anchor">#</a> Java中的集合实现</h2> <p><img src="https://cdn.harrisonlee.net/image-20210118154544460.png" alt="Java中的集合实现"></p> <h3 id="列表"><a href="#列表" class="header-anchor">#</a> 列表</h3> <p><strong>列表存储了一组逻辑上并无关联的同一类型的数据</strong>，采用数组和链表实现均可。如<code>ArrayList</code>采用数组，<code>LinkedList</code>采用链表。</p> <h3 id="队列和栈"><a href="#队列和栈" class="header-anchor">#</a> 队列和栈</h3> <p>队列和栈主要用来实现某种特定策略，比如队列可以用来实现先进先出（FIFO），栈可以用来实现先进后出（LIFO）。队列和栈既可以使用数组也可以使用链表来实现。使用数组实现的队列有<code>ArrayDeque</code>，这是一个双端队列，可以用来实现栈；使用链表存储的队列有<code>LinkedBlockingDeque</code>，这是一个双端阻塞队列的实现。</p> <h3 id="映射"><a href="#映射" class="header-anchor">#</a> 映射</h3> <p>尽管数组可以实现随机访问，但是当访问元素之前必须要知道相应的下标，否则还是要像链表一样进行遍历操作，时间复杂度为<span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span></span>。<code>Map</code>接口定义的根据键来获取值的操作可以让查找的时间复杂度降低至<span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span>。映射可以使用hash和树来实现，注意映射并不等于hash，hash只是一种实现方式。一般像是<code>HashMap</code>， <code>LinkedHashMap</code>，<code>TreeMap</code>等，都综合运用了多种数据接口，如<code>HashMap</code>中就用了数组，链表，红黑树。</p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>关于树为什么能够实现映射以及为什么使用红黑树，这里说一下鄙人的拙见。映射的本质是提高查找的效率，而有些树也很有利于查找，比如二叉查找树，但是由于二叉查找树可能存在让查找线性化的问题（左斜树或右斜树），所以一般采用平衡二叉树来避免这个问题，平衡二叉树的定义是指左右子树的高度差不超过1，AVL树严格地实现了这样的要求。但是可能是实践实现，发现AVL树在使用中花费了大量时间用于维护自身的平衡结构，效率不太高（尽管可以优化）。红黑树算是一种非严格的平衡二叉树，对平衡的要求没有那么苛刻（当然也带来了复杂度），从而提高了查找的效率。</p> <p>B树或者B+树更多用于需要与磁盘打交道的场景，如数据库，目的是让整棵树变矮（减少与磁盘的交互次数）。关于B树或B+树与红黑树的查找效率对比可见下图，至于为什么Java设计团队要使用红黑树而不使用B树或B+树，这应该属于设计问题吧（其实也没什么不可以的）。</p> <p><img src="https://pic4.zhimg.com/80/v2-3b0dd24fe1bc5e5940cc405233ce1e0e_720w.jpg?source=1940ef5c" alt="多种查找树效率对比"></p></div> <h3 id="线程安全"><a href="#线程安全" class="header-anchor">#</a> 线程安全</h3> <p>上面的讨论中是假设在单线程中，如果在多线程场景中，对集合的操作可能会导致集合内部数据结构的紊乱，所以需要采取相应手段来确保集合操作的线程安全性。在很早以前，Java提供的集合框架都是线程安全的（如Vector，Stack，HashTable等），但也带来了很大的问题，因为这些集合中的方法都是由<code>synchronized</code>关键字修饰的，在早期该关键字的效率很低，而且经过实践发现大多数时候对于集合的操作还是在单线程中的，这样导致集合操作的效率很低了，这也是不推荐使用stack来实现栈，而使用<code>Deque</code>的实现类来代替的原因。</p> <p>但多线程的问题还是存在的，除了上述的遗留安全类集合，Java还提供了其他关于线程安全的集合类。整个Java中的线程安全集合可以分为三大类：</p> <ul><li>遗留的安全集合：如HashTable，Vector等。</li> <li>修饰的安全集合：Collections类提供了很多以“Synchronized”开头的修饰类，如<code>SynchronizedMap</code>，<code>SynchronizedList</code>等。这些修饰类的内部利用<strong>装饰器模式</strong>通过<code>synchronized</code>关键字来保证对原线程不安全的集合操作的线程安全。虽然近年来<code>synchronized</code>关键字的性能得到了优化，但是还有更好的实现。</li> <li>JUC并发包提供的安全集合：
<ul><li>Blocking类：大部分实现基于锁（显式锁），并提供用来阻塞线程的方法。</li> <li>CopyOnWrite类：修改时拷贝，适用于读多写少的场景，因为拷贝的代价较高。</li> <li>Concurrent类：内部很多操作采用CAS优化，利用分段锁来提供较高的吞吐量。但是这类容器具有<strong>弱一致性</strong>，即在遍历容器时，虽然遍历操作可以进行，但是遍历读取到的内容可能是旧数据；还有就是求大小的弱一致性，size方法返回的未必就是真正的size。</li></ul></li></ul> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>对于线程不安全的集合，如果发送了并发修改，会抛出<code>ConcurrentModificationException</code>（可以参考<a href="https://harrisonlee.net/pages/574b5f/" target="_blank" rel="noopener noreferrer">另一篇文章<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>），这种称为fail-fast机制，只是让遍历结束，而不能保证线程安全性。对于线程安全的集合并发访问不会导致失败，这种机制称为fail-safe。</p></div></div></div> <!----> <div class="page-edit"><!----> <div class="tags"><a href="/tags/?tag=Java" title="标签">#Java</a><a href="/tags/?tag=Collection" title="标签">#Collection</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2021-01-19</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/72f0d2/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Java中的强软弱虚引用</div></a> <a href="/pages/574b5f/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Java集合中的ConcurrentModificationException</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/72f0d2/" class="prev">Java中的强软弱虚引用</a></span> <span class="next"><a href="/pages/574b5f/">Java集合中的ConcurrentModificationException</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/0c4c2e/"><div>Spring AOP基础</div></a> <span>02-08</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/e0358f/"><div>SpringBoot中Filter的注册</div></a> <span>02-07</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/226a87/"><div>Java中的Lambda表达式及原理</div></a> <span>01-29</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:lzipant@gmail.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/HarrisonLee1998" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=755597173" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2020-2021
    <span>Harrison Lee | <a href="https://github.com/xugaoyi/vuepress-theme-vdoing/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">跟随系统</li><li class="iconfont icon-rijianmoshi">浅色模式</li><li class="iconfont icon-yejianmoshi">深色模式</li><li class="iconfont icon-yuedu">阅读模式</li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.36e91a11.js" defer></script><script src="/assets/js/2.409e0185.js" defer></script><script src="/assets/js/16.3d55b70f.js" defer></script>
  </body>
</html>