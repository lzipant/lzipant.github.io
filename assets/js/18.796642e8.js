(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{535:function(t,s,a){"use strict";a.r(s);var n=a(16),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("å…³äºJavaä¸­çš„"),a("code",[t._v("volatile")]),t._v("å…³é”®å­—ï¼Œæˆ‘ä¸ªäººè®¤ä¸ºæ˜¯Javaä¸­æœ€éš¾ç†è§£çš„å…³é”®å­—äº†ï¼ˆå¤ªéš¾äº†ï¼Œæ²¡æœ‰ä¹‹ä¸€ ï¼‰ã€‚ç¬”è€…æ›¾ç»å› ä¸ºä¸èƒ½å¾ˆå¥½ç†è§£è¯¥å…³é”®å­—ï¼Œæ”¾å¼ƒäº†Javaè½¬è€Œå»å­¦Cï¼Œä½†æ˜¯å‘ç°Cé‡Œé¢ä¹Ÿæœ‰"),a("code",[t._v("volatile")]),t._v("è¿™ä¸ªå…³é”®å­—ï¼ˆå½“æ—¶æˆ‘çš„å†…å¿ƒæ˜¯å´©æºƒçš„ ğŸ˜­ï¼‰ã€‚å¾ˆå¤šèµ„æ–™ä¹Ÿåœ¨è¯´è¯¥å…³é”®å­—ï¼Œä½†ä»ç„¶æ²¡æœ‰è§£å†³ç¬”è€…çš„ç–‘æƒ‘ï¼Œæ¯”å¦‚è¯¥å…³é”®å­—åˆ°åº•æ˜¯æ€ä¹ˆè®©å¤šä¸ªCPUä¹‹é—´ä¿è¯äº†å¯è§æ€§çš„ï¼Ÿä¸ç¼“å­˜ä¸€è‡´æ€§åè®®åˆæ˜¯æ€æ ·çš„å…³ç³»ï¼Ÿæœ¬æ–‡å°±æ¥ä¸€ä¸€è§£é‡Šè¿™äº›é—®é¢˜ã€‚")]),t._v(" "),a("h2",{attrs:{id:"ä¸¤ä¸ªé—®é¢˜"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¸¤ä¸ªé—®é¢˜"}},[t._v("#")]),t._v(" ä¸¤ä¸ªé—®é¢˜")]),t._v(" "),a("p",[t._v("åœ¨åˆ†æ"),a("code",[t._v("volatile")]),t._v("çš„åŸç†ä¹‹å‰ï¼Œå…ˆæ¥çœ‹ä¸€ä¸‹ä¸¤ä¸ªç»å…¸çš„é—®é¢˜ã€‚")]),t._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" isDone"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// private static volatile boolean isDone;")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InterruptedException")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sleep")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      isDone "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Thread A is done!"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InterruptedException")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"A"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("isDone"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Thread B is done!"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"B"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br")])]),a("p",[t._v("ä¸Šé¢æ˜¯ç¬¬ä¸€æ®µç¨‹åºï¼Œè¿è¡Œåä¼šå‘ç°çº¿ç¨‹Bä¸ä¼šç»“æŸã€‚ä½†æ˜¯å¦‚æœç»™"),a("code",[t._v("isDone")]),t._v("åŠ ä¸Š"),a("code",[t._v("volatile")]),t._v("å…³é”®å­—ï¼Œä¸€åˆ‡å°±æ­£å¸¸äº†ã€‚"),a("font",{attrs:{color:"deeppink"}},[t._v("è¿™ç§é—®é¢˜è¢«ç§°ä¸ºçº¿ç¨‹ä¹‹é—´çš„å¯è§æ€§ï¼Œä¹Ÿå°±æ˜¯è¯´volatileå…³é”®å­—ä¿è¯äº†çº¿ç¨‹ä¹‹é—´çš„å¯è§æ€§")]),t._v("ã€‚")],1),t._v(" "),a("p",[t._v("ä¸‹é¢å†æ¥çœ‹ä¸€æ®µç¨‹åºï¼š")]),t._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" singleton"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// private static volatile Object singleton;")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getObject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("singleton "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("synchronized")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("singleton "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        singleton "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" singleton"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br")])]),a("p",[t._v("ä¸Šé¢æ˜¯ç»å…¸çš„å®ç°å•ä¾‹æ¨¡å¼çš„æ–¹æ³•ï¼Œè¢«ç§°ä¸ºDCLï¼ˆdouble check lockï¼‰ã€‚ä½†æ˜¯ç›´æ¥ä½¿ç”¨ä¸Šé¢çš„å®ç°ï¼Œå¯èƒ½ä¼šæŠ›å‡º"),a("code",[t._v("NullPointerException")]),t._v("ã€‚ä½†æ˜¯å¦‚æœç»™"),a("code",[t._v("singleton")]),t._v("åŠ ä¸Š"),a("code",[t._v("volatile")]),t._v("å…³é”®å­—ï¼Œä¸€åˆ‡å°±æ­£å¸¸äº†ã€‚"),a("font",{attrs:{color:"deeppink"}},[t._v("è¿™ç§é—®é¢˜è¢«ç§°ä¸ºæŒ‡ä»¤é‡æ’åºé—®é¢˜ï¼Œä¹Ÿå°±æ˜¯è¯´volatileå…³é”®å­—ä¿è¯äº†å¯¹è¢«ä¿®é¥°çš„ç›®æ ‡è¿›è¡Œæ“ä½œçš„æ‰§ä»¤ä¸ä¼šè¢«é‡æ’åº")]),t._v("ã€‚")],1),t._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[t._v("ç¬”è®°")]),t._v(" "),a("p",[t._v("å…³äºDCLä¸ºä»€ä¹ˆä¼šå¯¼è‡´ç©ºæŒ‡é’ˆå¼‚å¸¸çš„ï¼Œè¿™é‡Œåšä¸€ä¸ªç®€å•çš„è¡¥å……ã€‚å¯¹äº"),a("code",[t._v("new")]),t._v("æ“ä½œï¼Œå¤§è‡´éœ€è¦ä¸‹é¢ä¸‰ä¸ªæ­¥éª¤ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("åˆ†é…æ–°å¯¹è±¡å†…å­˜ã€‚")]),t._v(" "),a("li",[t._v("è°ƒç”¨ç±»æ„é€ å™¨åˆå§‹åŒ–æˆå‘˜å˜é‡ã€‚")]),t._v(" "),a("li",[t._v("å°†å†…å­˜åˆ†é…åˆ°çš„åœ°å€å†™å…¥å¯¹è±¡å¼•ç”¨ä¸­ã€‚")])]),t._v(" "),a("p",[t._v("æ‰€ä»¥ï¼Œä¸€ä¸ªå¯¹è±¡çš„åˆ›å»ºå¹¶ä¸æ˜¯åŸå­æ“ä½œï¼Œå®Œå…¨æœ‰å¯èƒ½ä¸Šé¢ç¬¬ä¸‰æ­¥åœ¨ç¬¬äºŒæ­¥ä¹‹å‰æ‰§è¡Œï¼Œä»è€Œå¯¼è‡´å¼‚å¸¸ã€‚")])]),t._v(" "),a("h2",{attrs:{id:"ç¼“å­˜ä¸€è‡´æ€§"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç¼“å­˜ä¸€è‡´æ€§"}},[t._v("#")]),t._v(" ç¼“å­˜ä¸€è‡´æ€§")]),t._v(" "),a("p",[t._v("ç°å¦‚ä»Šå¾ˆå¤šå¤„ç†å™¨éƒ½æ˜¯å¤šæ ¸çš„ï¼Œæ¯ä¸ªCPUéƒ½æœ‰è‡ªå·±çš„ç§æœ‰ç¼“å­˜ï¼Œè®¿é—®åŒä¸€å†…å­˜çš„ä¸åŒçº¿ç¨‹åœ¨ä¸åŒçš„CPUä¸­è¿è¡Œæ˜¯å¾ˆæ­£å¸¸çš„äº‹æƒ…ï¼Œä½†æ˜¯è¿™æ ·ä¼šå¯¼è‡´ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯åŒä¸€å†…å­˜çš„æ•°æ®åœ¨ä¸åŒç¼“å­˜ä¸­ä¸ä¸€è‡´äº†ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç¡¬ä»¶å·¥ç¨‹å¸ˆä»¬å¼•å…¥äº†ç¼“å­˜ä¸€è‡´æ€§åè®®ï¼Œè¿™äº›åè®®è§„å®šäº†å¤šCPUä¹‹é—´å¦‚ä½•ä¿è¯ç¼“å­˜çš„ä¸€è‡´æ€§ã€‚å¯ä»¥å‚è€ƒç¬”è€…ä¹‹å‰å†™çš„å…³äºCPUç¼“å­˜çš„ç³»åˆ—åšå®¢ï¼š")]),t._v(" "),a("ul",[a("li",[a("p",[a("a",{attrs:{href:"https://harrisonlee.net/pages/4e8b73/",target:"_blank",rel:"noopener noreferrer"}},[t._v("CPUç¼“å­˜çš„åŸºç¡€æ¶æ„"),a("OutboundLink")],1)])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://harrisonlee.net/pages/856225/",target:"_blank",rel:"noopener noreferrer"}},[t._v("CPUç¼“å­˜ä¸€è‡´æ€§åè®®æ¦‚è¿°"),a("OutboundLink")],1)])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://harrisonlee.net/pages/35e881/",target:"_blank",rel:"noopener noreferrer"}},[t._v("CPUç¼“å­˜ä¸€è‡´æ€§åè®®ä¹‹MSI"),a("OutboundLink")],1)])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://harrisonlee.net/pages/5709ee/",target:"_blank",rel:"noopener noreferrer"}},[t._v("CPUç¼“å­˜ä¸€è‡´æ€§åè®®ä¹‹MESI"),a("OutboundLink")],1)])])]),t._v(" "),a("p",[t._v("æ³¨æ„ï¼ŒMESIåè®®åªæ˜¯ç¼“å­˜ä¸€è‡´æ€§åè®®ä¸­çš„ä¸€ç§ï¼Œç›®å‰ç”±Intelå…¬å¸å¹¿æ³›ä½¿ç”¨ã€‚å¦å¤–ï¼Œè¿˜æœ‰å…¶ä»–ç¬”è€…å°šæœªæåŠåˆ°çš„ç¼“å­˜ä¸€è‡´æ€§åè®®ï¼Œå¦‚å¹¿æ³›è¢«AMDå…¬å¸é‡‡ç”¨çš„MOESIåè®®ã€‚è¿™äº›åè®®çš„åç§°ä¸­æ¯ä¸ªå­—æ¯éƒ½è¡¨ç¤ºç¼“å­˜è¡Œçš„ä¸€ç§çŠ¶æ€ï¼Œä¸€èˆ¬çŠ¶æ€è¶Šå¤šï¼Œæ•ˆç‡è¶Šé«˜ï¼Œä½†æ˜¯å®ç°éš¾åº¦è¶Šå¤§ã€‚")]),t._v(" "),a("h2",{attrs:{id:"store-buffers"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#store-buffers"}},[t._v("#")]),t._v(" Store Buffers")]),t._v(" "),a("p",[t._v("ç¼“å­˜ä¸€è‡´æ€§åè®®èƒ½å¤Ÿä¿è¯å¤šCPUä¹‹é—´çš„ç¼“å­˜ä¸€è‡´ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆè¯´"),a("code",[t._v("volatile")]),t._v("å…·æœ‰ä¿è¯çº¿ç¨‹å¯è§æ€§çš„åŠŸèƒ½å‘¢ï¼Ÿä¹Ÿå°±æ˜¯è¯´æ—¢ç„¶æœ‰ç¼“å­˜ä¸€è‡´æ€§åè®®ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¿˜éœ€è¦"),a("code",[t._v("volatile")]),t._v("æ¥ä¿è¯ä¸€è‡´æ€§ã€‚")]),t._v(" "),a("p",[t._v("å…³äºè¿™ä¸ªé—®é¢˜ï¼Œä¹Ÿæ˜¯å›°æƒ‘äº†ç¬”è€…å¾ˆä¹…ï¼Œç©¶å…¶åŸå› è¿˜æ˜¯å¯¹ç¡¬ä»¶ç»†èŠ‚äº†è§£ä¸å¤Ÿã€‚")]),t._v(" "),a("p",[t._v("åœ¨"),a("a",{attrs:{href:"https://harrisonlee.net/pages/5709ee/",target:"_blank",rel:"noopener noreferrer"}},[t._v("CPUç¼“å­˜ä¸€è‡´æ€§åè®®ä¹‹MESI"),a("OutboundLink")],1),t._v("è¿™ç¯‡æ–‡ç« æœ«å°¾è®²åˆ°ï¼ŒMESIåè®®è§„å®šåœ¨å‘å‡ºâ€œread invalidateâ€æˆ–â€œvalidateâ€æ¶ˆæ¯ååªæœ‰æ”¶åˆ°å…¶ä»–CPUçš„â€œacknowledgeâ€æ¶ˆæ¯åæ‰èƒ½æ‰§è¡Œå†™æ“ä½œã€‚ä½†æ˜¯åœ¨æ¥æ”¶åˆ°â€œacknowledgeâ€æ¶ˆæ¯å‰åå†™å…¥å¹¶ä¸ä¼šå½±å“æœ€ç»ˆå†™å…¥çš„å€¼ï¼Œæ‰€ä»¥ç¡¬ä»¶å·¥ç¨‹å¸ˆä»¬ä¸ºäº†æé«˜ç¼“å­˜ä¸€è‡´æ€§åè®®çš„æ•ˆç‡ï¼Œåˆåœ¨CPUå’Œå…¶ç§æœ‰ç¼“å­˜ä¹‹é—´å¼•å…¥äº†ä¸€ä¸ªéƒ¨ä»¶ï¼Œå«åšStore Buffersï¼ˆåˆå«Write Buffersï¼‰ï¼Œå…³äºè¿™éƒ¨åˆ†å¯ä»¥å‚è€ƒç¬”è€…ä¹‹å‰çš„æ–‡ç« ï¼š"),a("a",{attrs:{href:"https://harrisonlee.net/pages/b770ae/",target:"_blank",rel:"noopener noreferrer"}},[t._v("CPUä¸­çš„Store Buffers"),a("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),a("p",[t._v("å¼•å…¥Store Buffersåï¼Œå¯¹ç¼“å­˜çš„å†™æ“ä½œä¸ä¼šå› ä¸ºç¼“å­˜ä¸€è‡´æ€§æ¶ˆæ¯çš„å‘é€ä¸æ¥æ”¶è€Œé˜»å¡ã€‚ä½†æ˜¯è¿™å¯èƒ½ä¼šå¯¼è‡´ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯ä½äºå‰é¢çš„æŒ‡ä»¤çš„ç»“æœè¢«å†™å…¥äº†Store Buffersä¸­ï¼Œè€Œä½äºåé¢çš„æŒ‡ä»¤çš„ç»“æœè¢«ç›´æ¥å†™å…¥äº†ç¼“å­˜ä¸­ï¼Œç¼“å­˜ä¸€è‡´æ€§åè®®åªèƒ½ç¡®ä¿ç¼“å­˜ä¸­çš„ä¸€è‡´ï¼Œä¸èƒ½ç®¡ç†Store Buffersã€‚æ‰€ä»¥ï¼Œåœ¨å…¶ä»–CPUçœ‹æ¥ï¼Œè¯¥CPUå¯¹è¿™ä¸¤æ¡æŒ‡ä»¤è¿›è¡Œäº†é‡æ’åºï¼Œ"),a("font",{attrs:{color:"deeppink"}},[t._v("è€Œè¿™ç§é‡æ’åºå¯èƒ½å¯¼è‡´çº¿ç¨‹ä¹‹é—´çš„å¯è§æ€§é—®é¢˜")]),t._v("ã€‚è€Œä¸ºäº†è§£å†³è¿™ç§é—®é¢˜ï¼Œä»ä»£ç å±‚é¢è€Œè¨€ï¼Œå°±éœ€è¦ä½¿ç”¨"),a("code",[t._v("volatile")]),t._v("ï¼Œä½†æ˜¯åœ¨CPUå±‚é¢è‚¯å®šä¸æ˜¯"),a("code",[t._v("volatile")]),t._v("æ¥è§£å†³é—®é¢˜çš„ï¼Œå…·ä½“ç»†èŠ‚è¯·ç»§ç»­å‚è€ƒä¸‹æ–‡ã€‚")],1),t._v(" "),a("h2",{attrs:{id:"lockæŒ‡ä»¤å‰ç¼€"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lockæŒ‡ä»¤å‰ç¼€"}},[t._v("#")]),t._v(" "),a("code",[t._v("lock")]),t._v("æŒ‡ä»¤å‰ç¼€")]),t._v(" "),a("p",[t._v("å…³äºè¿™éƒ¨åˆ†ï¼Œç¬”è€…ç›´æ¥å¼•ç”¨ä»å…¶ä»–èµ„æ–™ä¸­æŸ¥é˜…åˆ°çš„ç»“æœã€‚")]),t._v(" "),a("p",[t._v("å¯¹äºè¢«"),a("code",[t._v("volatile")]),t._v("æ‰€ä¿®é¥°çš„å˜é‡æ‰§è¡Œå†™æ“ä½œï¼Œä¼šåœ¨è¯¥å†™æ“ä½œåæ‰§è¡Œä¸‹é¢ä¸€å¥æ±‡ç¼–ä»£ç ï¼š")]),t._v(" "),a("div",{staticClass:"language-assembly line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("lock addl $0x0,(%esp)\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("é‡ç‚¹åœ¨äºè¿™ä¸ª"),a("code",[t._v("lock")]),t._v("å‰ç¼€ï¼Œè¿™ä¸ªæŒ‡ä»¤å‰ç¼€çš„ä½œç”¨ç±»ä¼¼äºå†…å­˜å±éšœï¼Œå†…å­˜å±éšœä¼šæ ‡è®°Store Buffersä¸­çš„å˜é‡ï¼Œååºçš„å†™æ“ä½œéƒ½ä¼šå†™å…¥Store Buffersä¸­ï¼Œè€Œä¸ä¼šç›´æ¥å†™å…¥ç¼“å­˜è¡Œä¸­ï¼Œå½“åˆ·æ–°Store Buffersæ—¶ï¼Œä¹Ÿæ˜¯å…ˆåˆ·æ–°å…ˆå†™å…¥çš„ï¼ˆFIFOç‰¹æ€§ï¼‰ã€‚è¿™æ ·å°±ä¿è¯äº†å…¶ä»–CPUå…ˆçœ‹åˆ°çš„ç»“æœä¸€å®šæ˜¯å…ˆæ‰§è¡Œçš„ï¼Œä»è€Œé¿å…äº†å› é‡æ’åºå¸¦æ¥çš„å¯è§æ€§é—®é¢˜ã€‚")]),t._v(" "),a("p",[t._v("å¦å¤–ï¼Œ"),a("code",[t._v("lock")]),t._v("å‰ç¼€è¿˜èƒ½å¤Ÿè®©ä¸€äº›éåŸå­æŒ‡ä»¤å…·æœ‰åŸå­æ€§ï¼Œå¦‚HotSpotä¸­å…³äºCASçš„å®ç°å°±åˆ©ç”¨äº†è¯¥å‰ç¼€ã€‚åœ¨æ—©æœŸCPUä¸­è¿˜æ²¡æœ‰ç¼“å­˜æ—¶ï¼Œé‚£æ—¶"),a("code",[t._v("lock")]),t._v("å‰ç¼€ä¼šé”ä½æ€»çº¿ï¼Œåœ¨å½“å‰æŒ‡ä»¤ç»“æŸä¹‹å‰å…¶ä»–CPUä¸èƒ½è®¿é—®å†…å­˜ã€‚å½“ç„¶ï¼Œè¿™ç§ç²—æš´çš„æ–¹å¼æ•ˆç‡è‚¯å®šå¾ˆä½ï¼Œåæ¥çš„"),a("code",[t._v("lock")]),t._v("åªä¼šé”ä½å…¶ä»–CPUå¯¹äºæ‰€é”ä½çš„å†…å­˜åœ°å€çš„è®¿é—®ï¼ˆæ— æ³•å‘èµ·ç¼“å­˜ä¸€è‡´æ€§æ¶ˆæ¯ï¼‰ã€‚")]),t._v(" "),a("p",[t._v("æ—¢ç„¶"),a("code",[t._v("lock")]),t._v("å‰ç¼€èƒ½å¤Ÿè®©æ‰€ä¿®é¥°çš„æŒ‡ä»¤å˜å¾—å…·æœ‰åŸå­æ€§ï¼Œè€ŒHotSpotä¸­"),a("code",[t._v("volatile")]),t._v("ä¹Ÿæ˜¯åŸºäº"),a("code",[t._v("lock")]),t._v("å‰ç¼€æ¥å®ç°çš„ï¼Œé‚£ä¸ºä»€ä¹ˆè¯´"),a("code",[t._v("volatile")]),t._v("ä¸èƒ½ä¿è¯ç¼“å­˜ä¸€è‡´æ€§å‘¢ï¼Ÿè¯·æ³¨æ„ï¼ŒHotSpotåªæ˜¯åœ¨å¯¹å˜é‡ä¿®æ”¹æŒ‡ä»¤çš„åé¢æ’å…¥äº†ä¸€æ¡"),a("code",[t._v("lock")]),t._v("æŒ‡ä»¤ï¼Œè€Œä¸æ˜¯è®©å˜é‡ä¿®æ”¹æŒ‡ä»¤å˜å¾—å…·æœ‰åŸå­æ€§ã€‚")]),t._v(" "),a("h2",{attrs:{id:"æ€»ç»“"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ€»ç»“"}},[t._v("#")]),t._v(" æ€»ç»“")]),t._v(" "),a("p",[t._v("æœ¬æ–‡åªæ˜¯å¯¹CPUå±‚é¢çš„æŒ‡ä»¤é‡æ’åºåšäº†ä»‹ç»ï¼Œå…¶å®ç¼–è¯‘å™¨è¿˜å¯èƒ½è¿›è¡ŒæŒ‡ä»¤çš„é‡æ’åºã€‚Javaå†…å­˜æ¨¡å‹ä¸­æœ‰ä¸€ä¸ªå…ˆè¡Œå‘ç”ŸåŸåˆ™ï¼ˆHappens-Beforeï¼‰ï¼Œè¯¥åŸåˆ™è§„å®šäº†ä¸€äº›æ“ä½œå¿…é¡»åœ¨å“ªäº›æ“ä½œä¹‹åè¿›è¡Œï¼ŒJavaç¼–è¯‘å™¨ä¸ä¼šå¯¹è¿™äº›æ“ä½œè¿›è¡Œé‡æ’ï¼Œä½†æ˜¯å¯¹äºå…¶ä»–çš„æ“ä½œéƒ½æ˜¯æœªå®šä¹‰çš„ã€‚"),a("code",[t._v("volatile")]),t._v("å˜é‡è§„åˆ™å±äºå…ˆè¡Œå‘ç”ŸåŸåˆ™ä¸­çš„ä¸€ç§ï¼Œæ‰€ä»¥Javaç¼–è¯‘å™¨ä¸ä¼šå¯¹ç”±"),a("code",[t._v("volatile")]),t._v("ä¿®é¥°çš„å˜é‡è¿›è¡Œè¿‡åº¦ä¼˜åŒ–ã€‚")])])}),[],!1,null,null,null);s.default=e.exports}}]);