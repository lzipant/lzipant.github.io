(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{558:function(t,_,v){"use strict";v.r(_);var a=v(16),r=Object(a.a)({},(function(){var t=this,_=t.$createElement,v=t._self._c||_;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("p",[t._v("数据链路层作为经典五层模型中的第二层，负责将网络层中的数据发送到传输介质（物理层）中。首先要搞清楚链路和数据链路的区别：链路是指从一个节点到相邻节点的一段物理信道（有线或无线），而中间没有任何交换节点；数据链路则是另一个概念，这是因为在链路上传送数据时还要有一些必要的通信协议来控制这些数据的传输。目前数据链路层的信道类型有两种：点对点信道和广播信道。")]),t._v(" "),v("p",[t._v("数据链路层协议有很多种，但是几乎每种协议都要解决下面三个问题。")]),t._v(" "),v("h2",{attrs:{id:"三个问题"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#三个问题"}},[t._v("#")]),t._v(" 三个问题")]),t._v(" "),v("h3",{attrs:{id:"封装成帧"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#封装成帧"}},[t._v("#")]),t._v(" 封装成帧")]),t._v(" "),v("p",[t._v("数据链路层把上层网络层的数据（简称为数据报，分组或包）分成很多块，在每个块前后分别加上首部和尾部数据，这三部分数据共同形成了数据链路层帧（frame）。之所以引入帧的概念，是为了控制数据传送的开始和结束，否则接收方将一直从链路上获取信号，导致无法正确识别有效数据。")]),t._v(" "),v("p",[v("img",{attrs:{src:"https://raw.githubusercontent.com/P0rZ9/img/master/2019_1/2019-09-07.20.21.09-image.png",alt:"数据链路层帧格式"}})]),t._v(" "),v("p",[t._v("另外，帧定义了数据的最大传输单元（MTU），如果长度太大将会分成多个数据片多次传送，避免了因数据错误导致重传整个数据包。")]),t._v(" "),v("p",[t._v("数据链路层协议定义了帧首部和帧尾部以及MTU的长度，通常不同的协议都不太一样，甚至有些协议没有帧尾部（如以太网），所以一定要搞清楚每种协议是怎么规定的。")]),t._v(" "),v("h3",{attrs:{id:"透明传输"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#透明传输"}},[t._v("#")]),t._v(" 透明传输")]),t._v(" "),v("p",[t._v("透明传输问题是为了解决封装成帧产生的衍生问题。")]),t._v(" "),v("p",[t._v("由于需要某些数据来表示帧的开始和结束，如果所要传输的数据中刚好包含了这样的数据，那么会导致接受方产生帧定界错误。"),v("strong",[t._v("透明传输是指不管所要传输的数据是什么，都不会导致帧定界错误。")]),t._v(" 由于所要传输的数据中可能出现任何表示帧开始和结束的数据，所以我们最好固定帧定界数据，去修改所要传送的数据。同样地，具体怎么做由协议说了算。")]),t._v(" "),v("p",[t._v("透明传输的实现方式有以下几种：")]),t._v(" "),v("ul",[v("li",[t._v("字符计数法：在帧头部中使用一个计数字段来表明帧内的字符数。")]),t._v(" "),v("li",[t._v("字符填充的首尾定界法：采用一些特定的字符来定界一帧的开始与结束，如果数据中也出现同样的字符，那么则插入转义字符，接受方收到后就知道这是普通数据，而不是帧定界数据。")]),t._v(" "),v("li",[t._v("零比特填充法：使用一个特定的比特模式，如01111110（例如PPP协议就使用这样的比特模式同时作为帧的开始结束标志）来标志一个帧的开始和结束，为了防止数据中也出现这样的比特模式，当数据中每连续出现5个连续的1时，将自动在后面插入一个0比特，接受方做该过程的逆操作即可。")]),t._v(" "),v("li",[t._v("违规编码法")])]),t._v(" "),v("p",[t._v("目前使用的较多的是零比特填充发和违规编码法。")]),t._v(" "),v("h3",{attrs:{id:"差错控制"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#差错控制"}},[t._v("#")]),t._v(" 差错控制")]),t._v(" "),v("p",[t._v("由于链路的不确定性，信号很可能收到干扰，导致数据错误。链路上的接收者接收到错误帧时，应该丢弃掉，通常我们需要经过多条链路通信，如果接收者不丢弃掉，继续转发，可能导致转发目的地错误，就算转发正确，也浪费了资源。")]),t._v(" "),v("p",[t._v("协议可以使用检错编码和纠错编码的方式计算帧校验序列（FCS）。FCS和普通数据一起发送给接收方的，产生了冗余（具体实现细节请查阅其他资料）。")]),t._v(" "),v("ul",[v("li",[v("p",[t._v("检错校验码包括奇偶校验码和循环冗余码。")])]),t._v(" "),v("li",[v("p",[t._v("常见的纠错编码是海明码，不但能发现错误，还能自动纠错。")])])]),t._v(" "),v("p",[t._v("另外，在早期通信质量不是很好时，大多数协议在差错控制的基础上增加了可靠传输，即收到正确的帧要进行确认。但是现如今通信质量已经大大提高了，所以现在的协议一般采用了区分对待的方法。对通信质量不好的链路，协议采用确认和重传机制；对于通信质量良好的链路，"),v("strong",[t._v("协议只是确保当前帧的数据正确，而不会提供可靠性保证，即不会保证帧的数量完整性以及帧之间的相对顺序保持一致")]),t._v("。")]),t._v(" "),v("h2",{attrs:{id:"相关协议"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#相关协议"}},[t._v("#")]),t._v(" 相关协议")]),t._v(" "),v("ul",[v("li",[t._v("PPP协议：一般在点对点链路上使用。")]),t._v(" "),v("li",[t._v("Ethernet V2：DIX制定的以太网协议")]),t._v(" "),v("li",[t._v("Frame  Relay：帧中继协议")]),t._v(" "),v("li",[t._v("HLDL：高级数据链路协议")]),t._v(" "),v("li",[t._v("......")])]),t._v(" "),v("p",[t._v("关于每种协议的细节，后面单独写文章总结。")]),t._v(" "),v("h2",{attrs:{id:"以太网"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#以太网"}},[t._v("#")]),t._v(" 以太网")]),t._v(" "),v("p",[t._v("以太网是一种局域网通信的技术标准，取代了其他局域网技术如令牌环，FDDI等，现如今局域网中基本上都使用以太网了。以太网有两个标准，一个是DIX Ethernet V2，另一个是IEEE 802.3。这两个标准很相似，但是随着发展，DIX Ethernet V2标准被广泛使用，所以现在又将以太网称为符合DIX Ethernet V2标准的局域网（尽管以太网是指标准而非局域网）。")]),t._v(" "),v("p",[t._v("以太网标准中采用了CSMA/CD（和CSMA/CA）技术，有时又称为协议（按理说以太网才是协议，只是以太网使用了CSMA/CD而已）。")]),t._v(" "),v("p",[t._v("以太网协议中没有帧结束定界符，因为其规定了在物理层使用曼彻斯特编码，接收端接收帧过程只要发现没有信号跳变，就认为帧结束。")]),t._v(" "),v("p",[v("img",{attrs:{src:"https://cdn.harrisonlee.net/image-20210113231949443.png",alt:"以太网V2帧格式"}})]),t._v(" "),v("p",[t._v("前8个字节为帧首部，包括7位为前导码，1位帧开始符。由于没有尾部，剩下的全部为帧中的数据（由以太网帧头部，网络层数据和FCS组成）。因为以太网帧数据部分最少要有64个字节，所以64减去以太网头部（14字节）和FCS（4字节），剩下就是46字节。如果网络层数据不够46字节，则需要填充，不用担心会扰乱网络层，因为网络层头部中保存了数据的有效长度。")]),t._v(" "),v("h2",{attrs:{id:"相关设备"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#相关设备"}},[t._v("#")]),t._v(" 相关设备")]),t._v(" "),v("h3",{attrs:{id:"适配器"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#适配器"}},[t._v("#")]),t._v(" 适配器")]),t._v(" "),v("p",[t._v("通俗一点说，适配器就是指的设备中的网卡（网络适配器），处于链路的端点。每个适配器出厂时带有一个MAC地址，48位二进制表示，一般情况下，该地址是不会变化的（但是可以在操作系统层面修改，让操作系统使用指定的MAC地址）。根据ARP协议可以解析到其他主机的MAC地址。")]),t._v(" "),v("p",[t._v("当网卡接收到广播帧时（目标MAC地址全是1），网卡需要处理数据。")]),t._v(" "),v("p",[t._v("适配器发送数据时，根据协议，封装成帧；接收到数据时，根据协议，去掉帧头部和帧尾部，然后将数据发送到操作系统中交给协议栈处理，这也是为什么抓包工具不能抓取数据链路层的帧首部和帧尾部的原因。")]),t._v(" "),v("h3",{attrs:{id:"中继器"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#中继器"}},[t._v("#")]),t._v(" 中继器")]),t._v(" "),v("p",[t._v("一种较老的设备，功能是增强信号。")]),t._v(" "),v("h3",{attrs:{id:"集线器"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#集线器"}},[t._v("#")]),t._v(" 集线器")]),t._v(" "),v("p",[t._v("在使用普通总线型广播链路时（直接一个电缆连接所有设备），每个设备采用T型接口连接到总线上。该方式虽然简单，但是很容易出问题，导致通信质量不太好，为了解决该问题，引入了集线器（hub）。所有设备连接到集线器上，形成了星型拓扑结构，逻辑上仍然是总线型，"),v("strong",[t._v("即也可以把集线器看成网线")]),t._v("。集线器的链路仍然是广播型链路，其中一个设备发送信号给集线器，集线器会转发该信号到所有的其他设备。如果多个集线器组网，会导致冲突与也增大，导致效率低下。使用集线器是单双工模式，不能同时收发，因为以太网采用了CSMA/CD，如果同时发则导致了冲突了。")]),t._v(" "),v("h3",{attrs:{id:"网桥"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#网桥"}},[t._v("#")]),t._v(" 网桥")]),t._v(" "),v("p",[t._v("网桥是为了解决集线器带来的冲突域增大。其内部有一个MAC地址表，保存了每一项MAC地址域端口。当网桥端口接收到信号时，其会判断目标MAC是否域源MAC在同一端口范围内，如果是，则不会转发到其他端口中，从而不会与其他主机的通信之间产生碰撞。如果MAC地址表中没有目标MAC地址，也会转发到所有的端口，当目标设备响应时，网桥会记录下MAC与端口，从而形成一个自学习过程。")]),t._v(" "),v("h3",{attrs:{id:"交换机"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#交换机"}},[t._v("#")]),t._v(" 交换机")]),t._v(" "),v("p",[t._v("其实，可以把交换机看成网口更多的网桥，现在交换机基本淘汰掉网桥了。对于单播帧，交换机仍然只会将帧转换到目标主机所在的主机；对于广播帧，才会转发到所有的端口，所以交换机组网又称为一个广播域（采用路由器来隔绝广播）。交换机工作模式可以是全双工，则不再使用CSMA/CD，因为使用双绞线可以同时收发。交换机的端口独享带宽，而且不同端口速率可以不一致，但集线器不行，因为集线器本质上是网线，各个端口速度都一致。"),v("strong",[t._v("尽管全双工模式下的交换机不再使用CSMA/CD技术，但是组成的网络仍然以太网，因为帧格式仍然是以太网的帧格式")]),t._v("。")]),t._v(" "),v("p",[t._v("链路层交换机没有MAC地址。")]),t._v(" "),v("h3",{attrs:{id:"光电转换器"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#光电转换器"}},[t._v("#")]),t._v(" 光电转换器")]),t._v(" "),v("p",[t._v("光信号适合远距离传输，所以两个远距离的局域网之间通信可以采用光电转换器，将信号在电信号和光信号之间转换。光电转换器我们一般称之为光猫。")]),t._v(" "),v("h2",{attrs:{id:"参考"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[t._v("#")]),t._v(" 参考")]),t._v(" "),v("ul",[v("li",[t._v("《计算机网络（第七版）》谢希仁")]),t._v(" "),v("li",[t._v("《王道2021考研计算机网络》")])])])}),[],!1,null,null,null);_.default=r.exports}}]);